<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from robot.xacro                    | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="wheelchair">
  <!--Tire-->
  <material name="tire_material">
    <color rgba="0.301961 0.301961 0.301961 1"/>
  </material>
  <material name="tire_2_material">
    <color rgba="0.301961 0.301961 0.301961 1"/>
  </material>
  <material name="tire_3_material">
    <color rgba="0.301961 0.301961 0.301961 1"/>
  </material>
  <material name="tire_4_material">
    <color rgba="0.301961 0.301961 0.301961 1"/>
  </material>
  <!--Rim-->
  <material name="rim_material">
    <color rgba="0.647059 0.647059 0.647059 1"/>
  </material>
  <material name="rim_2_material">
    <color rgba="0.647059 0.647059 0.647059 1"/>
  </material>
  <material name="rim_3_material">
    <color rgba="0.647059 0.647059 0.647059 1"/>
  </material>
  <material name="rim_4_material">
    <color rgba="0.647059 0.647059 0.647059 1"/>
  </material>
  <!-- Wheel (link + joint)-->
  <!-- =========================
       Footprint -> base_link
  ========================== -->
  <link name="base_footprint"/>
  <joint name="base_footprint_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <!-- 필요 시 높이 보정: z -->
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <!-- =========================
       base_link
  ========================== -->
  <link name="base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-4.76552e-18 2.86142e-17 -0.05"/>
      <mass value="109.261"/>
      <inertia ixx="2.39367" ixy="-7.30346e-16" ixz="0" iyy="5.92579" iyz="0" izz="8.13808"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 -0.1"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/frame.stl"/>
      </geometry>
      <material name="base_link_material">
        <color rgba="0.8 0.74902 0.913725 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.1"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/frame.stl"/>
      </geometry>
    </collision>
  </link>
  <!-- =========================
       Chair
  ========================== -->
  <link name="chair">
    <inertial>
      <origin rpy="0 0 0" xyz="-2.47568e-17 -0.101356 -0.123597"/>
      <mass value="13.9735"/>
      <inertia ixx="0.552457" ixy="1.94092e-16" ixz="0" iyy="0.511931" iyz="-0.164794" izz="0.511931"/>
    </inertial>
    <visual>
      <origin rpy="3.14159 0 0" xyz="-5.74184e-17 4.72259e-05 0"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/chair.stl"/>
      </geometry>
      <material name="chair_material">
        <color rgba="0.231373 0.380392 0.705882 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="3.14159 0 0" xyz="-5.74184e-17 4.72259e-05 0"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/chair.stl"/>
      </geometry>
    </collision>
  </link>
  <joint name="chair_joint" type="fixed">
    <origin rpy="3.14159 0 1.5708" xyz="-1.42302e-19 5.74184e-17 0"/>
    <parent link="base_link"/>
    <child link="chair"/>
    <axis xyz="0 0 1"/>
    <limit effort="10" velocity="10"/>
  </joint>
  <link name="front_right_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="-2.22037e-09 1.06602e-06 -0.037537"/>
      <mass value="13.3494"/>
      <inertia ixx="0.111824" ixy="-2.80625e-07" ixz="1.36714e-10" iyy="0.111824" iyz="1.28637e-07" izz="0.19275"/>
    </inertial>
    <!-- Tire-->
    <visual>
      <origin rpy="1.5708 1.38778e-16 0" xyz="0 0 -0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/tire.stl"/>
      </geometry>
      <material name="tire_material"/>
    </visual>
    <collision>
      <origin rpy="1.5708 1.38778e-16 0" xyz="0 0 -0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/tire.stl"/>
      </geometry>
    </collision>
    <!-- Rim-->
    <visual>
      <origin rpy="1.5708 -3.50219e-16 0" xyz="0 0 -0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/rim.stl"/>
      </geometry>
      <material name="rim_material"/>
    </visual>
    <collision>
      <origin rpy="1.5708 -3.50219e-16 0" xyz="0 0 -0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/rim.stl"/>
      </geometry>
    </collision>
  </link>
  <!-- Joint-->
  <joint name="front_rw" type="continuous">
    <parent link="base_link"/>
    <child link="front_right_wheel"/>
    <origin rpy="-1.5708 0 0" xyz="0.265 -0.31 -0.05"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="front_left_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="-2.22037e-09 1.06602e-06 0.0375369"/>
      <mass value="13.3494"/>
      <inertia ixx="0.111824" ixy="-2.80625e-07" ixz="1.36714e-10" iyy="0.111824" iyz="1.28637e-07" izz="0.19275"/>
    </inertial>
    <!-- Tire-->
    <visual>
      <origin rpy="1.5708 -1.38778e-16 0" xyz="0 0 0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/tire.stl"/>
      </geometry>
      <material name="tire_2_material"/>
    </visual>
    <collision>
      <origin rpy="1.5708 -1.38778e-16 0" xyz="0 0 0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/tire.stl"/>
      </geometry>
    </collision>
    <!-- Rim-->
    <visual>
      <origin rpy="1.5708 -3.50219e-16 0" xyz="0 0 0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/rim.stl"/>
      </geometry>
      <material name="rim_2_material"/>
    </visual>
    <collision>
      <origin rpy="1.5708 -3.50219e-16 0" xyz="0 0 0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/rim.stl"/>
      </geometry>
    </collision>
  </link>
  <!-- Joint-->
  <joint name="front_lw" type="continuous">
    <parent link="base_link"/>
    <child link="front_left_wheel"/>
    <origin rpy="-1.5708 0 0" xyz="0.265 0.31 -0.05"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="rear_right_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="-2.22037e-09 1.06602e-06 -0.037537"/>
      <mass value="13.3494"/>
      <inertia ixx="0.111824" ixy="-2.80625e-07" ixz="1.36714e-10" iyy="0.111824" iyz="1.28637e-07" izz="0.19275"/>
    </inertial>
    <!-- Tire-->
    <visual>
      <origin rpy="1.5708 1.38778e-16 0" xyz="0 2.77556e-17 -0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/tire.stl"/>
      </geometry>
      <material name="tire_4_material"/>
    </visual>
    <collision>
      <origin rpy="1.5708 1.38778e-16 0" xyz="0 2.77556e-17 -0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/tire.stl"/>
      </geometry>
    </collision>
    <!-- Rim-->
    <visual>
      <origin rpy="1.5708 -3.50219e-16 0" xyz="0 2.77556e-17 -0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/rim.stl"/>
      </geometry>
      <material name="rim_4_material"/>
    </visual>
    <collision>
      <origin rpy="1.5708 -3.50219e-16 0" xyz="0 2.77556e-17 -0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/rim.stl"/>
      </geometry>
    </collision>
  </link>
  <!-- Joint-->
  <joint name="back_rw" type="continuous">
    <parent link="base_link"/>
    <child link="rear_right_wheel"/>
    <origin rpy="-1.5708 0 0" xyz="-0.265 -0.31 -0.05"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="rear_left_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="-2.22037e-09 1.06602e-06 0.0375369"/>
      <mass value="13.3494"/>
      <inertia ixx="0.111824" ixy="-2.80625e-07" ixz="1.36714e-10" iyy="0.111824" iyz="1.28637e-07" izz="0.19275"/>
    </inertial>
    <!-- Tire-->
    <visual>
      <origin rpy="1.5708 -1.38778e-16 0" xyz="0 0 0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/tire.stl"/>
      </geometry>
      <material name="tire_3_material"/>
    </visual>
    <collision>
      <origin rpy="1.5708 -1.38778e-16 0" xyz="0 0 0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/tire.stl"/>
      </geometry>
    </collision>
    <!-- Rim-->
    <visual>
      <origin rpy="1.5708 -3.50219e-16 0" xyz="0 0 0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/rim.stl"/>
      </geometry>
      <material name="rim_3_material"/>
    </visual>
    <collision>
      <origin rpy="1.5708 -3.50219e-16 0" xyz="0 0 0.037537"/>
      <geometry>
        <mesh filename="package://wheelchair_description/wheelchair/assets/rim.stl"/>
      </geometry>
    </collision>
  </link>
  <!-- Joint-->
  <joint name="back_lw" type="continuous">
    <parent link="base_link"/>
    <child link="rear_left_wheel"/>
    <origin rpy="-1.5708 0 0" xyz="-0.265 0.31 -0.05"/>
    <axis xyz="0 0 1"/>
  </joint>




<!-- GPS Visualization-->
<link name="gps_link">
  <inertial>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <mass value="0.05"/>
    <inertia ixx="1e-5" ixy="0" ixz="0" iyy="1e-5" iyz="0" izz="1e-5"/>
  </inertial>
  <visual>
    <geometry><box size="0.03 0.03 0.01"/></geometry>
  </visual>
</link>
<joint name="gps_joint" type="fixed">
  <parent link="base_link"/>
  <child link="gps_link"/>
  <origin rpy="0 0 0" xyz="0.0 0.0 0.1"/>
</joint>



<!-- Ignition Gazeobo NavSat (GPS Sensor)-->
<gazebo reference="gps_link">
  <sensor name="gps" type="navsat">
    <always_on>true</always_on>
    <update_rate>5</update_rate>
    <visualize>false</visualize>
    <topic>/gps/fix</topic>
    <gz_frame_id>gps_link</gz_frame_id>
  </sensor>
</gazebo>





  <!-- Lidar Visualization-->
  <link name="lidar_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="1e-4" ixy="0" ixz="0" iyy="1e-4" iyz="0" izz="1e-4"/>
    </inertial>
    <visual>
      <geometry>
        <cylinder length="0.05" radius="0.03"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.05" radius="0.03"/>
      </geometry>
    </collision>
  </link>
  <joint name="lidar_joint" type="fixed">
    <parent link="base_link"/>
    <child link="lidar_link"/>
    <origin rpy="0 0 0" xyz="-0.1 0 0.15"/>
  </joint>






  <!-- Ignition Gazebo 2D LiDAR -->
  <gazebo reference="lidar_link">
    <sensor name="lidar" type="gpu_lidar">
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <topic>/lidar/scan</topic>
      <frame_id>lidar_link</frame_id>
      <visualize>true</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-3.14159</min_angle>
            <max_angle>3.14159</max_angle>
          </horizontal>
          <vertical>
            <samples>1</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.35</min>
          <max>15.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <gz_frame_id>lidar_link</gz_frame_id>
    </sensor>
  </gazebo>




  <!-- Ignition Gazebo 3D LiDAR-->
  <!-- <gazebo reference="lidar_link">
    <sensor name="lidar" type="gpu_lidar">
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <topic>/lidar/scan</topic>
      <frame_id>lidar_link</frame_id>
      <visualize>true</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-3.14159</min_angle>
            <max_angle>3.14159</max_angle>
          </horizontal>
          <vertical>
            <samples>16</samples>
            <resolution>1</resolution>
            <min_angle>-0.35</min_angle>
            <max_angle>0.35</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.2</min>
          <max>30.0</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <stddev>0.02</stddev>
        </noise>
      </ray>
      <gz_frame_id>lidar_link</gz_frame_id>
    </sensor>
  </gazebo> -->






<!-- Camera Visualization-->
  <link name="camera_stand_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0.4"/>
      <mass value="0.5"/>
      <inertia ixx="1e-3" ixy="0" ixz="0" iyy="1e-3" iyz="0" izz="1e-3"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.4"/>
      <geometry>
        <cylinder length="0.8" radius="0.02"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.4"/>
      <geometry>
        <cylinder length="0.8" radius="0.02"/>
      </geometry>
    </collision>
  </link>
  <joint name="camera_stand_link_joint" type="fixed">
    <parent link="base_link"/>
    <child link="camera_stand_link"/>
    <origin rpy="0 0 0" xyz="-0.3 0 0.002"/>
  </joint>
  <link name="front_rgbd_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.2"/>
      <inertia ixx="5e-4" ixy="0" ixz="0" iyy="5e-4" iyz="0" izz="5e-4"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.05 0.06 0.04"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.05 0.06 0.04"/>
      </geometry>
    </collision>
  </link>
  <joint name="front_rgbd_joint" type="fixed">
    <parent link="camera_stand_link"/>
    <child link="front_rgbd_link"/>
    <origin rpy="0 0 0" xyz="0 0 0.8"/>
  </joint>



  <!-- Ignition Gazebo RGB Camera + Depth Camera-->
  <gazebo reference="front_rgbd_link">
    <sensor name="front_rgbd_rgb" type="camera">
      <always_on>1</always_on>
      <visualize>true</visualize>
      <update_rate>30</update_rate>
      <topic>front_rgbd/rgb/image</topic>
      <ignition_frame_id>front_rgbd_optical_frame</ignition_frame_id>
      <camera>
        <horizontal_fov>1.0471976</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>15.0</far>
        </clip>
      </camera>
    </sensor>
  </gazebo>
  <!-- Depth Camera-->
  <gazebo reference="front_rgbd_link">
    <sensor name="front_rgbd_depth" type="depth_camera">
      <always_on>1</always_on>
      <visualize>true</visualize>
      <update_rate>30</update_rate>
      <topic>front_rgbd/depth/image</topic>
      <ignition_frame_id>front_rgbd_optical_frame</ignition_frame_id>
      <camera>
        <horizontal_fov>1.0471976</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R_FLOAT32</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>15.0</far>
        </clip>
      </camera>
      <depth_camera>
        <point_cloud>true</point_cloud>
        <min_range>0.05</min_range>
        <max_range>15.0</max_range>
        <resolution>0.001</resolution>
      </depth_camera>
    </sensor>
  </gazebo>
  <link name="front_rgbd_optical_frame"/>
  <joint name="front_rgbd_optical_joint" type="fixed">
    <parent link="front_rgbd_link"/>
    <child link="front_rgbd_optical_frame"/>
    <origin rpy="-1.5707963 0 -1.5707963" xyz="0 0 0"/>
  </joint>
  <link name="rear_rgbd_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.2"/>
      <inertia ixx="5e-4" ixy="0" ixz="0" iyy="5e-4" iyz="0" izz="5e-4"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.05 0.06 0.04"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.05 0.06 0.04"/>
      </geometry>
    </collision>
  </link>
  <joint name="rear_rgbd_joint" type="fixed">
    <parent link="camera_stand_link"/>
    <child link="rear_rgbd_link"/>
    <origin rpy="0 0 3.14159" xyz="0 0 0.8"/>
  </joint>
  <!-- Gazebo RGB Camera + Depth Camera-->
  <gazebo reference="rear_rgbd_link">
    <sensor name="rear_rgbd_rgb" type="camera">
      <always_on>1</always_on>
      <visualize>true</visualize>
      <update_rate>30</update_rate>
      <topic>rear_rgbd/rgb/image</topic>
      <ignition_frame_id>rear_rgbd_optical_frame</ignition_frame_id>
      <camera>
        <horizontal_fov>1.0471976</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>15.0</far>
        </clip>
      </camera>
    </sensor>
  </gazebo>
  <!-- Depth Camera-->
  <gazebo reference="rear_rgbd_link">
    <sensor name="rear_rgbd_depth" type="depth_camera">
      <always_on>1</always_on>
      <visualize>true</visualize>
      <update_rate>30</update_rate>
      <topic>rear_rgbd/depth/image</topic>
      <ignition_frame_id>rear_rgbd_optical_frame</ignition_frame_id>
      <camera>
        <horizontal_fov>1.0471976</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R_FLOAT32</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>15.0</far>
        </clip>
      </camera>
      <depth_camera>
        <point_cloud>true</point_cloud>
        <min_range>0.05</min_range>
        <max_range>15.0</max_range>
        <resolution>0.001</resolution>
      </depth_camera>
    </sensor>
  </gazebo>
  <link name="rear_rgbd_optical_frame"/>
  <joint name="rear_rgbd_optical_joint" type="fixed">
    <parent link="rear_rgbd_link"/>
    <child link="rear_rgbd_optical_frame"/>
    <origin rpy="-1.5707963 0 -1.5707963" xyz="0 0 0"/>
  </joint>



  <!-- =========================
       IMU Visualization
  ========================== -->
  <link name="imu_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.05"/>
      <inertia ixx="1e-5" ixy="0" ixz="0" iyy="1e-5" iyz="0" izz="1e-5"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.03 0.03 0.01"/>
      </geometry>
      <material name="imu_material">
        <color rgba="0.2 0.8 0.2 1.0"/>
      </material>
    </visual>
  </link>
  <joint name="imu_joint" type="fixed">
    <parent link="base_link"/>
    <child link="imu_link"/>
    <!-- 실제 장착 위치로 조정 -->
    <origin rpy="0 0 0" xyz="0.0 0.0 0.25"/>
  </joint>
  <!-- 3) Gazebo(IMU) 센서 지정 -->
  <!-- URDF 안에서 Gazebo 플러그인/센서를 추가하려면 <gazebo reference="..."> 사용 -->
  <gazebo reference="imu_link">
    <sensor name="imu_sensor" type="imu">
      <always_on>true</always_on>
      <update_rate>100</update_rate>
      <visualize>false</visualize>
      <gz_frame_id>imu_link</gz_frame_id>
      <topic>imu</topic>
      <pose> 0 0 0 0 0 0</pose>
      <imu>
        <angular_velocity>true</angular_velocity>
        <linear_acceleration>true</linear_acceleration>
      </imu>
    </sensor>
  </gazebo>




  <!-- =========================
       Gazebo DiffDrive (Ignition)
  ========================== -->
  <gazebo>
    <plugin filename="gz-sim-joint-state-publisher-system" name="gz::sim::systems::JointStatePublisher"/>
    <plugin filename="libignition-gazebo6-diff-drive-system.so" name="ignition::gazebo::systems::DiffDrive">
      <!-- 좌/우 바퀴 조인트: 좌측 2개, 우측 2개 -->
      <left_joint>front_lw</left_joint>
      <left_joint>back_lw</left_joint>
      <right_joint>front_rw</right_joint>
      <right_joint>back_rw</right_joint>
      <!-- 기하 파라미터 -->
      <wheel_separation>0.62</wheel_separation>
      <wheel_radius>0.15</wheel_radius>
      <!-- Gazebo 내부 토픽: 브리지에서 ROS와 매핑 -->
      <topic>/cmd_vel</topic>
      <!-- => /model/<MODEL_NAME>/cmd_vel -->
      <odom_topic>/odom</odom_topic>
      <!-- => /model/<MODEL_NAME>/odometry -->
      <odom_publish_frequency>50</odom_publish_frequency>
      <!-- TF는 EKF가 퍼블리시 -->
      <frame_id>odom</frame_id>
      <child_frame_id>base_link</child_frame_id>
    </plugin>
  </gazebo>
</robot>
