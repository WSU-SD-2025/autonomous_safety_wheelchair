<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

    <!-- Wheel (link + joint)-->

    <xacro:macro name="wheel_link"
                params="
                    name 
                    joint_name joint_xyz joint_rpy
                    tire_mesh rim_mesh
                    tire_material rim_material
                    inertial_xyz inertial_rpy:='0 0 0'
                    tire_xyz tire_rpy
                    rim_xyz rim_rpy">

        <link name="${name}">
            <inertial>
                <origin xyz="${inertial_xyz}" rpy="${inertial_rpy}"/>
                <mass value="13.3494"/>
                <inertia 
                    ixx="0.111824" ixy="-2.80625e-07" ixz="1.36714e-10" 
                    iyy="0.111824" iyz="1.28637e-07" 
                    izz="0.19275"/>
            </inertial>

            <!-- Tire-->
            <visual>
                <origin xyz="${tire_xyz}" rpy="${tire_rpy}"/>

                <geometry>
                    <mesh filename="${tire_mesh}"/>
                </geometry>

                <material name="${tire_material}"/>
            </visual>

            <collision>
                <origin xyz="${tire_xyz}" rpy="${tire_rpy}"/>

                <geometry>
                    <mesh filename="${tire_mesh}"/>
                </geometry>
            </collision>

            <!-- Rim-->
            <visual>
                <origin xyz="${rim_xyz}" rpy="${rim_rpy}"/>

                <geometry>
                    <mesh filename="${rim_mesh}"/>
                </geometry>

                <material name="${rim_material}"/>
            </visual>

            <collision>
                <origin xyz="${rim_xyz}" rpy="${rim_rpy}"/>

                <geometry>
                    <mesh filename="${rim_mesh}"/>
                </geometry>
            </collision>
        </link>


        <!-- Joint-->
        <joint name="${joint_name}" type="continuous">
            <parent link="base_link"/>
            <child link="${name}"/>
            <origin xyz="${joint_xyz}" rpy="${joint_rpy}"/>
            <axis xyz="0 0 1"/>
        </joint>
    </xacro:macro>
</robot>

